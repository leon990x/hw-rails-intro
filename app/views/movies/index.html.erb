<!--  This file is app/views/movies/index.html.erb -->
<h2>All Movies</h2>

<!--<form id="ratings_form" action="" method="<%=:get%>">-->
<!--  <p>Include: </p>-->
<!--  <input type="checkbox" id="ratings_G" name="ratings_G" value="<%=@all_ratings[0]%>">-->
<!--    <label for="ratings_G">G</label>-->
<!--  <input type="checkbox" id="ratings_PG" name="ratings_PG" value="<%=@all_ratings[1]%>">-->
<!--    <label for="ratings_PG">PG</label>-->
<!--  <input type="checkbox" id="ratings_PG-13" name="ratings_PG-13" value="<%=@all_ratings[2]%>">-->
<!--    <label for="ratings_PG-13">PG-13</label>-->
<!--  <input type="checkbox" id="ratings_R" name="ratings_R" value="<%=@all_ratings[3]%>">-->
<!--    <label for="ratings_R">R</label>-->
<!--  <input type="submit" id="ratings_submit" class="btn btn-primary" value="Refresh">-->
<!--</form>-->

<%= form_tag({movies_path}, {:method => :get}) do %>
  <% @all_ratings.each do |rating| %>
    <%= form.check_box :tags, {multiple: true}, rating, nil %>
    <%= form.submit %>
  
<% end %>


<table class="table table-striped col-md-12" id="movies">
  <thead>
    <tr>
      <th class="<%= ("hilite bg-warning" if @sort == 'title') %>" ><%= link_to "Movie Title",movies_path(sort: "title"),id: "title_header"%></th>
      <th>Rating</th>
      <th class="<%= ("hilite bg-warning" if @sort == 'release_date') %>"><%= link_to "Release Date",movies_path(sort: "release_date"),id: "release_date_header"%></th>
      <th>More Info</th> 
    </tr>
  </thead>
  <tbody>
    <% @movies.each do |movie| %>
      <tr>
        <td>
          <%= movie.title %>
        </td>
        <td>
          <%= movie.rating %>
        </td>
        <td>
          <%= movie.release_date %>
        </td>
        <td>
          <%= link_to "More about #{movie.title}", movie_path(movie) %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= link_to 'Add new movie', new_movie_path, :class => 'btn btn-primary' %>